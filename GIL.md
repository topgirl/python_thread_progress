## GIL

### GIL的作用
GIL(Global Interpreter Lock)。为了利用多核，Python开始支持多线程，GIL解决多线程之间数据完整性和状态同步。

### GIL的缺点
GIL类似于全局排他锁，全局锁的存在会对多线程的效率有不小的影响，甚至就几乎等于Python是个单线程程序。

#### 效率对比测试：

将一个循环1亿次的计数器函数，在单线程上执行两次，再在多线程上执行，最后比较执行总时间。从而对比Python在多线程和单线程下的效率。结果显示，多线程比单线程的效率低很多。

#### 总结：

Python的多线程在多核CPU上，只对于IO密集型计算产生正面效果；而当有至少一个CPU密集型线程存在，那么多线程效率会由于GIL而大幅下降。

### 如何避免受到GIL的影响
用multiprocessing替代Thread。
multiprocessing库可以弥补Thread库因为GIL而低效的缺陷，它完整的复制了一套thread所提供的接口方便迁移，它使用了多进程而不是多线程，每个进程有自己独立的GIL，因此不会出现进程之间的GIL争抢。